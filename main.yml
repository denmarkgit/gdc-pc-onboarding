---
- hosts: win

  # The hostname will determine the device role and username
  # sample hostname gdc-accounting-dt-name-surname
  # hostname will be split and be put to variables needed for the playbook
  pre_tasks:

    - set_fact:
        device_config: "{{ ansible_hostname.split('-') }}"

    - set_fact:
        device_company: "{{  device_config.0 }}"
        device_role: "{{  device_config.1 }}"
        device_type: "{{  device_config.2 }}"
        employee_name: "{{  device_config.3 }}"
        employee_surname: "{{  device_config.4 }}"

    - debug:
        msg:
          - "{{ device_role }}"
          - "{{ employee_surname }}"

  roles:
    - common

  tasks:

    - include_role:
        name: "{{ device_role }}"
